---
import { Image } from "astro:assets"
import type { CollectionEntry } from "astro:content"
import PostsList from "./PostsList.astro"

interface Props {
	post: CollectionEntry<"posts">["data"]
	related?: CollectionEntry<"posts">[]
}
const { post, related } = Astro.props
---

<div class="flex flex-col items-start gap-4 lg:flex-row">
	<article class="mx-auto flex max-w-screen-md flex-col gap-2">
		<Image class="w-[700px] max-w-lg" src={post.image.url} alt={post.image.alt} inferSize />
		<h1 class="text-center text-3xl">{post.title}</h1>
		<span class="text-center text-sm text-accent-11"
			>by <b>{post.author}</b> on <b>{post.pubDate.toDateString()}</b></span
		>
		<slot class="mt-4" />
	</article>

	{
		related && related.length > 0 && (
			<aside class="mx-auto flex w-full max-w-screen-md flex-col gap-2 border-t border-neutral-5 pt-4 lg:border-none">
				<>
					<h2 class="text-xl font-bold text-accent2-11">Related Posts</h2>
					<ul>
						<PostsList posts={related} compact />
					</ul>
				</>
			</aside>
		)
	}
</div>

<style is:global>
	article {
		max-width: 100%;
	}
	article img {
		max-width: 90%;
		margin: 2rem auto;
		border-radius: 0.25rem;
	}
	article h1,
	article h2,
	article h3,
	article h4,
	article h5,
	article h6 {
		margin-top: 1rem;
		font-family: "DM Serif Text", serif;
		font-weight: bold;
	}

	article h2 {
		font-size: 1.65rem;
		border-bottom: 1px solid var(--slate-5);
	}
	article h3 {
		font-size: 1.35rem;
	}
	article h4,
	article h5,
	article h6 {
		font-size: 1.2rem;
	}

	article code {
		color: var(--indigo-11);
	}

	article a {
		color: var(--teal-11);
		font-weight: bold;
	}

	article pre {
		padding: 1rem;
		border-radius: 4px;
	}
</style>
